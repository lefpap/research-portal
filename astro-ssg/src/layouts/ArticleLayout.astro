---
import type { ComponentProps } from "astro/types";
import BaseLayout from "./BaseLayout.astro";
import type { CollectionEntry } from "astro:content";
import {
  CalendarIcon,
  ChevronLeftIcon,
  ClockIcon,
  NewspaperIcon,
} from "lucide-react";
import { format } from "date-fns";
import { Button } from "@/components/ui/button";

interface Props extends ComponentProps<typeof BaseLayout> {
  // Add props here
  article: CollectionEntry<"news">;
  minutesRead: number;
}

const { article, minutesRead, ...rest } = Astro.props;
---

<BaseLayout {...rest}>
  <div class="container grid gap-10">
    <a href="/news">
      <Button
        variant={"outline"}
        size={"sm"}
        className="flex items-center justify-center gap-2"
      >
        <ChevronLeftIcon className="size-4" />
        Back to News
      </Button>
    </a>
    <article
      class="prose prose-stone max-w-none dark:prose-invert md:prose-lg lg:prose-xl"
    >
      <header>
        <div
          class="mb-3 flex items-center justify-start gap-3 font-mono text-sm"
        >
          <a
            href={article.data.source.url}
            target="_blank"
            class="flex items-center gap-1 font-mono text-xs text-muted-foreground"
          >
            <NewspaperIcon className="size-4" />
            <span>{article.data.source.name}</span>
          </a>
          <span
            class="flex items-center gap-1 text-xs uppercase text-muted-foreground"
          >
            <CalendarIcon className="size-4" />
            <span>
              {format(article.data.publishedAt, "MMM dd, yyyy")}
            </span>
          </span>
          <span
            class="flex items-center gap-1 text-xs uppercase text-muted-foreground"
          >
            <ClockIcon className="size-4" />
            <span>{`${minutesRead} min read`}</span>
          </span>
        </div>
        <h1 class="">{article.data.title}</h1>
        <p class="">{article.data.summary}</p>
        <img
          src={article.data.coverImage}
          alt={article.id}
          class="mt-3 size-full max-h-96 rounded-lg border bg-muted bg-cover object-cover"
        />
      </header>
      <main class="mt-11">
        <slot />
      </main>
    </article>
  </div>
</BaseLayout>
